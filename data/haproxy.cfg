global
    tune.ssl.default-dh-param 2048
    log 172.17.0.1 local2

defaults
    log     global
    mode    http
    option  tcplog
    timeout connect 5000
    timeout client  50000
    timeout server  50000

listen graylog_api
    mode tcp
    bind *:${API_PUBLISH_PORT}
    server graylog ${LOGGING_SERVER}:${API_SERVER_PORT} ssl crt /usr/local/etc/haproxy/cert/client.pem ca-file /usr/local/etc/haproxy/cert/ca.pem check

listen graylog_beats
    mode tcp
    bind *:${BEATS_PUBLISH_PORT}
    server graylog ${LOGGING_SERVER}:${BEATS_SERVER_PORT} ssl crt /usr/local/etc/haproxy/cert/client.pem ca-file /usr/local/etc/haproxy/cert/ca.pem check
